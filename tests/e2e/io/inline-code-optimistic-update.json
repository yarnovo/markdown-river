{
  "name": "行内代码的策略补全场景",
  "description": "用户输入 ` 后再输入字符，策略应该进行乐观更新，自动补全闭合的 `",
  "input": {
    "chunks": ["`", "c"],
    "timing": "sequential"
  },
  "expected": {
    "steps": [
      {
        "after_chunk": 0,
        "description": "输入 ` 后，策略决定保持当前位置等待",
        "parsed_content": "",
        "display_html": "",
        "strategy_decision": "wait",
        "reason": "单独的 ` 符号后无内容，等待更多输入"
      },
      {
        "after_chunk": 1,
        "description": "输入 c 后，策略决定乐观补全为 `c`",
        "parsed_content": "`c`",
        "display_html": "<p><code>c</code></p>\n",
        "strategy_decision": "complete",
        "reason": "检测到未闭合的 ` 且后面有内容，进行乐观补全"
      }
    ],
    "final_state": {
      "total_chunks_processed": 2,
      "final_display": "<p><code>c</code></p>\n",
      "strategy_calls": 2
    }
  }
}
